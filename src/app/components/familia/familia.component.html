<div class="main">
    <mat-form-field class="search" appearance="outline">
        <input matInput type="text">
        <button mat-button matSuffix mat-icon-button>
            <mat-icon>search</mat-icon>
        </button>
    </mat-form-field>

    <table mat-table [dataSource]="familias">
        <ng-container matColumnDef="menu">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let familia">
                <mat-menu #menu="matMenu">
                    <button mat-menu-item [routerLink]="['/familias/familia', familia.cdFamilia]">Ver</button>
                </mat-menu>
                <button mat-icon-button [matMenuTriggerFor]="menu">
                    <mat-icon color="accent">more_vert</mat-icon>
                </button>
            </td>
        </ng-container>

        <ng-container matColumnDef="nrProntuario">
            <th mat-header-cell *matHeaderCellDef> Pront. </th>
            <td mat-cell *matCellDef="let familia">{{ familia.nrProntuario }}</td>
        </ng-container>
        <ng-container matColumnDef="nmAluno">
            <th mat-header-cell *matHeaderCellDef> Educandos </th>
            <td mat-cell *matCellDef="let familia">
                <div *ngFor="let aluno of familia.alunos">{{ aluno.nmAluno }} </div>
            </td>
        </ng-container>
        <ng-container matColumnDef="dtNascimento">
            <th mat-header-cell *matHeaderCellDef> Nasc. </th>
            <td mat-cell *matCellDef="let familia">
                <div class="inner-line" *ngFor="let aluno of familia.alunos">{{ aluno.dtNascimento | date:'dd/MM/yyyy' }} </div>
            </td>
        </ng-container>
        <ng-container matColumnDef="nrIdade">
            <th mat-header-cell *matHeaderCellDef> Idade </th>
            <td mat-cell *matCellDef="let familia">
                <div class="inner-line" *ngFor="let aluno of familia.alunos">{{ getIdade(aluno.dtNascimento) }} </div>
            </td>
        </ng-container>
        <ng-container matColumnDef="nmEscola">
            <th mat-header-cell *matHeaderCellDef> Escola </th>
            <td mat-cell *matCellDef="let familia">
                <div class="inner-line" *ngFor="let aluno of familia.alunos">{{ aluno.nmEscola }} </div>
            </td>
        </ng-container>
        <ng-container matColumnDef="tpTurnoFamec">
            <th mat-header-cell *matHeaderCellDef> Turno </th>
            <td mat-cell *matCellDef="let familia">
                <div class="inner-line" *ngFor="let aluno of familia.alunos">{{ getTurno(aluno.tpTurnoFamec) }} </div>
            </td>
        </ng-container>
        <ng-container matColumnDef="dsEndereco">
            <th mat-header-cell *matHeaderCellDef> Endereço </th>
            <td mat-cell *matCellDef="let familia">{{ familia.responsavel.enderecoResponsavel.nmRua }},
                {{ familia.responsavel.enderecoResponsavel.nrCasa }}</td>
        </ng-container>
        <ng-container matColumnDef="nmBairro">
            <th mat-header-cell *matHeaderCellDef> Bairro </th>
            <td mat-cell *matCellDef="let familia">{{ familia.responsavel.enderecoResponsavel.nmBairro }}</td>
        </ng-container>
        <ng-container matColumnDef="nmResponsavel">
            <th mat-header-cell *matHeaderCellDef> Responsável </th>
            <td mat-cell *matCellDef="let familia">{{ familia.responsavel.nmResponsavel }}</td>
        </ng-container>
        <ng-container matColumnDef="nrTelefone1">
            <th mat-header-cell *matHeaderCellDef> Telefone </th>
            <td mat-cell *matCellDef="let familia">{{ familia.responsavel.nrTelefone1 }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <button id="add-button" mat-fab color="primary" [routerLink]="['/familias/familia']">
        <mat-icon>add</mat-icon>
    </button>
</div>